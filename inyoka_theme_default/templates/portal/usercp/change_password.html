{#
    portal/usercp/change_password.html
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

    This page dispalys a form where the user can change his password.

    :copyright: (c) 2013-2015 by the Inyoka Team, see AUTHORS for more details.
    :license: BSD, see LICENSE for more details.
#}

{% extends 'portal/usercp/overall.html' %}
{% import 'macros.html' as macros %}

{% block breadcrumb %}
  {{ super() }}

  {{ macros.breadcrumb_item(_('Change password'), href('portal', 'usercp', 'password')) }}
{% endblock %}
{% set selected = 'password' %}

{% block content %}
  <h3>{% trans %}Change password{% endtrans %}</h3>
  {% trans %}
    You can change your password with this form. For security reasons, you need to enter your old password.
  {% endtrans %}
  {% call macros.outer_form(csrf_token(), form, manually_rendered=True, submit_label=_('Change password')) %}
    {{ macros.inner_form(form, ['old_password', 'new_password', 'new_password_confirm']) }}
  {% endcall %}

  <h3>{% trans %}Password generator{% endtrans %}</h3>
  {% if random_pw %}
    {% trans %}Generated password:{% endtrans %}
    <code id="random_password">{{ random_pw }}</code> |
  {% endif %}
  <a href="{{ href('portal', 'usercp', 'password', random='true') }}" id="random_password_link">
    {% if random_pw %}
      {% trans %}Generate a new one{% endtrans %}
    {% else %}
      {% trans %}Generate a random password{% endtrans %}
    {% endif %}
  </a>
{% endblock %}
